!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports,require("fs"),require("dayjs")):"function"==typeof define&&define.amd?define(["exports","fs","dayjs"],i):i((e||self).logger={},e.fs,e.dayjs)}(this,function(e,i,t){function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=/*#__PURE__*/r(i),n=/*#__PURE__*/r(t);function s(e){var i=function(e){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var t=i.call(e,"string");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof i?i:i+""}var l={TRACE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,OFF:99},a=/*#__PURE__*/function(){function e(){this.break=[],this.level=0,this.console={},this.file=!1,this.name=!1,this.hideSecrets=!1}var i,t,r=e.prototype;return r.config=function(e){var i=e.name,t=void 0===i?"my logger":i,r=e.displayConsole,o=void 0!==r&&r,n=e.level,s=void 0===n?l.TRACE:n,a=e.hideSecrets,c=void 0===a||a;this.file=e.file,this.name=t,this.console={display:o,log:console.log,error:console.error},this.level=s,this.hideSecrets=c},r.addBreak=function(e){this.break.push(e),this.info("lib/logger","addBreak",this.break)},r.setName=function(e){this.name=e},r.trace=function(){var e=[].slice.call(arguments);e.unshift("TRACE"),this.log(e)},r.debug=function(){var e=[].slice.call(arguments);e.unshift("DEBUG"),this.log(e)},r.info=function(){var e=[].slice.call(arguments);e.unshift("INFO"),this.log(e)},r.warn=function(){var e=[].slice.call(arguments);e.unshift("WARN"),this.log(e)},r.error=function(){var e=[].slice.call(arguments);e.unshift("ERROR"),this.log(e)},r.log=function(e){var i=(e=this.filterLogger(e)).shift(),t=e.shift();if(0==this.break.length&&this.level<=l[i]||this.break.includes(t)||["ERROR","FATAL"].includes(i)){var r,o=this.name.indexOf("]")>-1?this.name:"["+this.name+"]",s=["["+n.default().format("HH:mm:ss")+"]","["+i+"]",o,"["+t+"]"].concat(e);if(this.console.display||["ERROR","FATAL"].includes(i))if(["ERROR","FATAL"].includes(i))(r=this.console).error.apply(r,s);else if(["WARN"].includes(i)){var a;(a=this.console).warn.apply(a,s)}else{var c;(c=this.console).log.apply(c,s)}this.file&&(s.shift(),s=["["+n.default().format("YYYY-MM-DD HH:mm:ss")+"]"].concat(s),this.writeFile(this.file,s))}},r.writeFile=function(e,i){var t=e.split("/").slice(0,-1).join("/");o.default.existsSync(t)||o.default.mkdirSync(t,{recursive:!0}),o.default.appendFile(e,i+"\n",function(e){e&&console.error("logger writeFile",e)})},r.filterLogger=function(e){for(var i=0;i<e.length;i++){var t;"Logger"==(null==(t=e[i])||null==(t=t.constructor)?void 0:t.name)?e.splice(i,1):e[i].logger?delete e[i].logger:e[i].cert?e[i].cert=e[i].cert.substring(0,10)+"..."+e[i].cert.substring(e[i].cert.length-10):e[i].password?e[i].password=e[i].password.replace(e[i].password,"*"):e[i].pass&&!this.hideSecrets?e[i].pass=e[i].pass.replace(e[i].pass,"*"):e[i].clave&&!this.hideSecrets?e[i].clave=e[i].clave.replace(e[i].clave,"*"):e[i].token&&!this.hideSecrets?e[i].token=e[i].token.replace(e[i].token,"*"):e[i]instanceof Error?e[i]=e[i].message+"\nstack:"+e[i].stack:"object"==typeof e[i]?e[i]=JSON.stringify(e[i]):Array.isArray(e[i])&&(e[i]=e[i].join(","))}return e},i=e,(t=[{key:"levels",get:function(){return l}}])&&function(e,i){for(var t=0;t<i.length;t++){var r=i[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}(),c=new a;e.createLogger=function(e){var i=e.name,t=e.displayConsole,r=e.level;c.config({file:e.file,name:void 0===i?"my logger":i,displayConsole:void 0!==t&&t,level:void 0===r?l.TRACE:r})},e.logger=c});
//# sourceMappingURL=logger.umd.js.map
